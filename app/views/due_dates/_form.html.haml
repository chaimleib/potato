= form_for @due_date do |f|
  .container-fluid
    - if @due_date.errors.any?
      .row#error-explanation
        %h3= "#{pluralize(@due_date.errors.count, "error")} prohibited this due date from being saved:"
        %ul
          - @due_date.errors.full_messages.each do |msg|
            %li= msg
    .row.form-group
      .col-sm-2.field= f.label :branch_name
      .col-sm-10
        = f.text_field :branch_name, class: 'form-control'
    .row.form-group
      .col-sm-2.field= f.label :due
      .col-sm-10.date
        = f.text_field :due, class: 'datepicker form-control'
        / .form-note OR
        - if @due_date.id.nil?
          - due_refs = DueDate.where('branch_name like "\_%"').sort_by(&:branch_name)
        - else
          - due_refs = DueDate.where('branch_name like "\_%" and id != ?', @due_date.id).sort_by(&:branch_name)
        = f.collection_select(:due_ref_id, due_refs, :id, :branch_name, {include_blank: "Use date above"})
    .row.form_buttons.actions.input-group= f.submit 'Save'
